# About Springboot
### 注意: SpringBoot是不用自己去配置Tomcat的!!!
### 妈的, 我在2020-01-23这一天折腾了好几个小时, 死活配置不好Tomacat, 突然想起来SpringBoot是不用配置Tomcat的....
### SpringBoot 自己内置了一个小型的服务器
### 方便快捷, 适用于快速开发


```  


```


## Springboot 常见目录结构树 ( win10 打开 cmd -> tree D:code  /f ):
<details>
<summary><b> Springboot 文件夹树形结构 </b></summary>

```  

├─demo-2
│  │  pom.xml
│  │
│  └─src
│      ├─main
│      │  ├─java
│      │  │  └─com
│      │  │      └─example
│      │  │          └─demo
│      │  │              │  DemoApplication.java
│      │  │              │
│      │  │              ├─bean
│      │  │              │      Major.java
│      │  │              │      Student.java
│      │  │              │      User.java
│      │  │              │
│      │  │              ├─controller
│      │  │              │      MajorController.java
│      │  │              │      StudentController.java
│      │  │              │      UserLoginController.java
│      │  │              │
│      │  │              ├─dao
│      │  │              │      MajorDao.java
│      │  │              │      StudentDao.java
│      │  │              │      UserLoginDao.java
│      │  │              │
│      │  │              └─service
│      │  │                  │  MajorService.java
│      │  │                  │  StudentService.java
│      │  │                  │  UserLoginService.java
│      │  │                  │
│      │  │                  └─impl
│      │  │                          MajorImpl.java
│      │  │                          StudentImpl.java
│      │  │                          UserLoginImpl.java
│      │  │
│      │  └─resources
│      │          application.properties
│      │
│      └─test
│          └─java
│              └─com
│                  └─example
│                      └─demo
│                              DemoApplicationTests.java





├─spring-boot-web-thymeleaf
│  │  pom.xml
│  │
│  └─src
│      ├─main
│      │  ├─java
│      │  │  └─demo
│      │  │      └─springboot
│      │  │          │  WebApplication.java
│      │  │          │
│      │  │          ├─domain
│      │  │          │      Book.java
│      │  │          │
│      │  │          ├─service
│      │  │          │  │  BookService.java
│      │  │          │  │
│      │  │          │  └─impl
│      │  │          │          BookServiceImpl.java
│      │  │          │
│      │  │          └─web
│      │  │                  BookController.java
│      │  │
│      │  └─resources
│      │      │  application.properties
│      │      │
│      │      ├─static
│      │      │  ├─css
│      │      │  │      default.css
│      │      │  │
│      │      │  └─images
│      │      │          favicon.ico
│      │      │
│      │      └─templates
│      │              bookForm.html
│      │              bookList.html
│      │
│      └─test
│          └─java
│              └─demo
│                  └─springboot
│                          WebApplicationTests.java


```
</details>







<details>
<summary><b>树形目录结构详解: </b></summary>

```  


├─demo-2
│  │  pom.xml
│  │
│  └─src
│      ├─main
│      │  ├─java
│      │  │  └─com
│      │  │      └─example
│      │  │          └─demo
│      │  │              │  DemoApplication.java   [启动类 run ]
                                        public static void main(String[] args) {
                                                SpringApplication.run(DemoApplication.class, args);
                                        }
│      │  │              │
│      │  │              ├─bean   [bean类(也叫Entity)]
│      │  │              │      User.java
                                            private int user_id;
                                            private String user_name;
                                            private String password;

                                            public User(){}

                                            public User(String user_name, String password) {
                                                this.user_name = user_name;
                                                this.password = password;
                                            }      
│      │  │              │
│      │  │              ├─controller   [ controller 控制类]
│      │  │              │      StudentController.java
                                          @GetMapping("/getAll")
                                          public List<Student> getAll(){
                                              return studentService.findAll();
                                          }

                                          @GetMapping("/get/{name}")
                                          public Student getByName(@PathVariable String name){
                                              return studentService.searchByName(name);
                                          }
│      │  │              │
│      │  │              ├─dao   [dao类 与数据库互动]
│      │  │              │      StudentDao.java
                                    @Query("select s from Student s where s.stu_name=?1")
                                    Student searchByName(String name);
│      │  │              │
│      │  │              └─service   [service类]
│      │  │                  │  StudentService.java
                                    public interface StudentService {
                                            //根据姓名查找
                                            Student searchByName(String name);  
                                    }
│      │  │                  │
│      │  │                  └─impl   [实现类]
│      │  │                         StudentImpl.java
                                        @Autowired
                                        StudentDao studentDao;

                                        @Override
                                        public Student searchByName(String name) {
                                            return studentDao.searchByName(name);
                                        }    
│      │  │
│      │  └─resources   [资源文件夹]
│      │       application.properties   [配置文件]
                            spring.datasource.url=jdbc:mysql://localhost:3306/mysql?serverTimezone=UTC&useUnicode=true&characterEncoding=utf-8&useSSL=false
                            spring.datasource.username=root
                            spring.datasource.password=root

                            spring.datasource.driver-class-name=com.mysql.jdbc.Driver
                            spring.jpa.properties.hibernate.hbm2ddl.auto=none
│      │      ├─static   [静态文件 css js pic等]
│      │      │  ├─css
│      │      │  │      default.css
│      │      │  │
│      │      │  └─images
│      │      │          favicon.ico
│      │      │
│      │      └─templates   [html]
│      │              bookForm.html
│      │              bookList.html                            
│      │
│      └─test
│          └─java
│              └─com
│                  └─example
│                      └─demo
│                              DemoApplicationTests.java



```
</details>






























<details>
<summary><b> 显示8080 端口被占用?  </b></summary>

```  

打开windows的命令窗口 ( 也就是 CMD )

netstat -ano  (假设8080端口被占用, 找到哪个程序用了8080端口,并且记下这个程序的PID号码)

tasklist|findstr "4792"  (根据程序的PID号码,获取这个程序进程的名字)

打开windows的任务管理器, 根据这个程序进程的名字 , 找到并且结束进程

```
</details>





















<details>
<summary><b> SpringBoot 起步 </b></summary>

```  

官方网站下载配置包:
https://start.spring.io/

用 idea 打开, 记得配置 maven 镜像
idea -> settings -> maven


在 src/main/java 下面 新建:
     controller(控制层) , Dao(放 mapper 映射文件) , POJO(实体类 bean) , Tools(常用的工具) 四个包

     



然后:
添加 controller:

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
/**
 *  index
 */
@Controller
public class index_controller {

    @Autowired
    private UserMapper userMapper;

    @RequestMapping(value="/", method= RequestMethod.GET   )
    public String TEST(Model model){
        System.out.println("TEST");
//        String path = "src/main/java/com/hehe/Article/";
//        model.addAttribute("result" , path);
          model.addAttribute("Fiction_content" , Fiction_content);

        return "TEST.html";
    }
    
}




Mapper类: 
import org.apache.ibatis.annotations.Select;
import java.util.List;

@org.apache.ibatis.annotations.Mapper
public interface ArticleMapper {
    @Select("   SELECT `movie_name` FROM `tb_Movie_Script` GROUP BY `movie_name`;    ")
    List<String> Movie_name_list();

    @Select("   SELECT * FROM `tb_Movie_Script` WHERE `movie_name` = '肖申克的救赎.txt'  ")
    List<Tb_Movie_Script_POJO> Get_movie_Script();
}







    





然后:
在 src\main\resources\ 文件夹下面新建一个 templates 文件夹 , 用来存放 *.html 的web文件
在 src\main\resources\ 文件夹下面新建一个 static    文件夹,  用来放 CSS js pic 等静态资源

随便找一张图片放在 static 里面, 用来测试静态资源是否可以正常访问
新建 TEST.html 放在 templates 文件夹里面 , 里面随便写一点内容, 显示刚才找的那张图片

~ 注意: 
    static 里面的静态资源更新的时候, 需要重启服务器, 不然没办法及时更新
    templates 是固定写法, 不能随便乱写 ~
    如果死活还是访问不到 static 下面的静态资源 , 比如图片类文件, 不是代码写的不对, 尝试把项目彻底关闭, 删除target文件夹
    target文件夹存放的是编译后的文件, 也就是说, 会有缓存, 导致静态资源刷新不及时
    然后, 重新编译一遍
    然后打开浏览器, 就可以正常访问静态图片文件了


在 idea 中使用快捷键更新数据:
    Ctrl + F5  重启服务器
    Ctrl + shift + F9 更新前端 web 页面的数据(后台 Java 文件变动还是要 Ctrl + F5  重启服务器的)







然后:
配置 application.properties 

# ####################################################################
# 端口号
server.port=8088

# 编码字符
server.tomcat.uri-encoding=UTF-8

# 数据库的驱动 , 数据库 , 用户名, 密码
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://localhost:3306/xxxxxxxxx?useUnicode=true&characterEncoding=UTF-8&serverTimezone=UTC
spring.datasource.username=root
spring.datasource.password=root

# 静态资源的 路径
spring.mvc.static-path-pattern=/**

# 开发时关闭缓存,不然没法看到实时页面
spring.thymeleaf.cache=false







然后:
找到:
src/main/java/com/AAA/Dictionary/DictionaryApplication.java
这个类, 运行它
    因为 SpringBoot 自带了一个微型的服务器, 所以不用像以前那样自己去配置 Tomcat 服务器了
运行它, 就是启动服务器了

然后打开浏览器访问:   
    http://localhost:8088






注意: 
    访问页面有可能会报错:
        Whitelabel Error Page
        This application has no explicit mapping for /error, so you are seeing this as a fallback.

        Tue Mar 24 14:43:23 CST 2020
        There was an unexpected error (type=Internal Server Error, status=500).
        Error resolving template [/Note/Note.html], template might not exist or might not be accessible by any of the configured Template Resolvers    
    
    这时候检查一下 html 文件, 保持干净, 不要有其他的代码, 不然会访问出错






```
</details>






























<details>
<summary><b>pom.xml添加文件依赖 / 并配置 aliyun 镜像</b></summary>

```  	


常用 maven jar 插件:
 https://mvnrepository.com/artifact/javazoom/jlayer

    <dependencies>



        <!--                  spring web              -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-thymeleaf</artifactId>
        </dependency>

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>



        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpclient</artifactId>
            <version>4.5.5</version>
        </dependency>

        <dependency>
            <groupId>javazoom</groupId>
            <artifactId>jlayer</artifactId>
            <version>1.0.1</version>
        </dependency>

        <dependency>
            <groupId>com.h2database</groupId>
            <artifactId>h2</artifactId>
            <scope>runtime</scope>
        </dependency>

        <dependency>
            <groupId>org.mybatis</groupId>
            <artifactId>mybatis</artifactId>
            <version>3.4.5</version>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.11</version>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>8.0.12</version>
        </dependency>

        <dependency>
            <groupId>org.apache.logging.log4j</groupId>
            <artifactId>log4j-core</artifactId>
            <version>2.8.2</version>
        </dependency>

        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <version>2.4</version>
        </dependency>        



         <!--                                 JSON                           -->
        <dependency>
            <groupId>org.jsoup</groupId>
            <artifactId>jsoup</artifactId>
            <version>1.10.2</version>
        </dependency>

        <dependency>
            <groupId>com.alibaba</groupId>
            <artifactId>fastjson</artifactId>
            <version>1.2.58</version>
        </dependency>

        <dependency>
            <groupId>com.fasterxml.jackson.core</groupId>
            <artifactId>jackson-databind</artifactId>
            <version>2.9.5</version>
        </dependency>       

        <dependency>
            <groupId>com.google.code.gson</groupId>
            <artifactId>gson</artifactId>
            <version>2.8.1</version>
        </dependency>

        <dependency>
            <groupId>org.json</groupId>
            <artifactId>json</artifactId>
            <version>20160810</version>
        </dependency>

    </dependencies>






















---------------------------------   完整 pom.xml 示例   --------------------------------- 

<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.hehe</groupId>
    <artifactId>Study_English</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>Study_English</name>
    <description>Demo project for Spring Boot</description>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
        <java.version>1.8</java.version>
    </properties>




    <parent>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-parent</artifactId>
            <version>2.2.5.RELEASE</version>
		    <relativePath/> <!-- lookup parent from repository -->
    </parent>




    <dependencies>


        <!--               Spring 家族                      -->

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-thymeleaf</artifactId>
        </dependency>

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-test</artifactId>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-jdbc</artifactId>
        </dependency>

        <dependency>
            <groupId>org.mybatis.spring.boot</groupId>
            <artifactId>mybatis-spring-boot-starter</artifactId>
            <version>1.3.2</version>
        </dependency>







        <!--                      other                           -->

        <!-- pagehelper -->
        <dependency>
            <groupId>com.github.pagehelper</groupId>
            <artifactId>pagehelper-spring-boot-starter</artifactId>
            <version>1.2.5</version>
        </dependency>


     <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpclient</artifactId>
            <version>4.5.5</version>
        </dependency>

        <!-- https://mvnrepository.com/artifact/javazoom/jlayer -->
        <dependency>
            <groupId>javazoom</groupId>
            <artifactId>jlayer</artifactId>
            <version>1.0.1</version>
        </dependency>

        <dependency>
            <groupId>com.h2database</groupId>
            <artifactId>h2</artifactId>
            <scope>runtime</scope>
        </dependency>

        <dependency>
            <groupId>com.fasterxml.jackson.core</groupId>
            <artifactId>jackson-databind</artifactId>
            <version>2.9.5</version>
        </dependency>

        <dependency>
            <groupId>org.mybatis</groupId>
            <artifactId>mybatis</artifactId>
            <version>3.4.5</version>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.11</version>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>8.0.12</version>
        </dependency>

        <dependency>
            <groupId>org.apache.logging.log4j</groupId>
            <artifactId>log4j-core</artifactId>
            <version>2.8.2</version>
        </dependency>

        <dependency>
            <groupId>org.jsoup</groupId>
            <artifactId>jsoup</artifactId>
            <version>1.10.2</version>
        </dependency>

        <dependency>
            <groupId>com.google.code.gson</groupId>
            <artifactId>gson</artifactId>
            <version>2.8.1</version>
        </dependency>

        <dependency>
            <groupId>com.alibaba</groupId>
            <artifactId>fastjson</artifactId>
            <version>1.2.58</version>
        </dependency>

        <dependency>
            <groupId>com.vaadin.external.google</groupId>
            <artifactId>android-json</artifactId>
            <version>0.0.20131108.vaadin1</version>
            <scope>compile</scope>
        </dependency>
    </dependencies>


    <build>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
            </plugin>
        </plugins>
    </build>

</project>



```
</details>































<details>
<summary><b> 包含某个html文件  </b></summary>

```  

规范: 
    包含某个 html 文件时候, 不要把 JavaScript 一起写进去, 
    虽然 html CSS 是公用的, 
    但是 交互逻辑可能不一样, 
        比如访问 url ,
        显示/隐藏某个节点,
        跳转到不同的网页
        ...
    都是不同的页面, 有着不同的交互逻辑,
    所以不要把 JavaScript 写进去



<style>
    写 CSS 样式表文件, 内容略...
</style>

<div class="container">
    写正文 , 内容略...
</div>

<script>
    JavaScript脚本, 内容略...
</script>

不需要加什么 body啊, title啊, 什么的

在 SpringBoot 的 thymeleaf 中, 添加这句代码, 表示包含 另一个 html
<div th:replace="/common_html/one.html"></div>
注意:
    1 路径问题
    2 要放在 templates 文件夹下面, 这是 spring 框架专属放 html 文件的地方 , 
      不要放在 static 里面去了, 那是放静态文件的 (就是 CSS , JavaScript , pic ... 之类的)



```
</details>





























<details>
<summary><b>访问路径</b></summary>

```  
静态资源一定要放在 src\main\resources\static 下面, 不要没办法访问

而且一定要 重启 springBoot 服务器 , 不然静态资源没办法更新 ( 在idea下快捷键是: Ctrl + F5 )

配置文件:
application.properties:
spring.mvc.static-path-pattern=/**

html引用:
<script src="/Remember_words/Last_Next_Words.js"></script>

src\main\resources\static\Remember_words\Last_Next_Words.js


```
</details>



















<details>
<summary><b>要注意的:</b></summary>

```  

注意:   在 Controller 里面注入 POJO 的时候
        有几个 POJO , 就在上面写几个 @Autowired
        不然会注入失败

@Controller
@RequestMapping(value="/Remember_word_Controller")
public class Remember_words_Controller {

    @Autowired
    private Dao dao;

    @Autowired
    private PhraseDao phraseDao;

```
</details>














































































































# Java + SpringBoot 前后端
注意:  前端 JavaScript 不要忘了 :
```  
        <script th:inline="javascript">  
        html文件的头 <html xmlns:th="http://www.thymeleaf.org">
```
<details>
<summary><b> Ajax + SpringBoot + jQuery </b></summary>

```  

jQuery 中 Ajax 中 dataType 有哪些类型

”xml”: 返回 XML 文档，可用 jQuery 处理
”html”: 返回纯文本 HTML 信息；包含的 script 标签会在插入 dom 时执行
”script”:  返回纯文本 JavaScript 代码。不会自动缓存结果。除非设置了 “cache” 参数。
            注意：在远程请求时(不在同一个域下)，所有 POST 请求都将转为 GET 请求。（因为将使用 DOM 的 script标签来加载）
”json”: 返回 JSON 数据 
”jsonp”: JSONP 格式。使用 JSONP 形式调用函数时，如 “myurl?callback=?” jQuery 将自动替换 ? 为正确的函数名，以执行回调函数
”text”: 返回纯文本字符串



               前端 Ajax
//params.XX必须与 Spring Mvc controller中的参数名称一致 , 否则在controller中使用@RequestParam绑定
var params = {};
params.Familiar = "YXB----YXB---YXB...";

$.ajax({
    async:false,
    type: "POST",
    url: "/Make_word_Familiar/index",         // 路径
    data:params,
    dataType:"json", -> 注意返回类型
    success:function(data){
            alert(data.result);
            params = data;
    },
    error:function(data){
        // alert(data.result);
    }
});
return params;    
需要把 data 赋值给 params, 再去返回值, 不然直接 return data 是没有作用的



                后端 Java
@Controller
@RequestMapping(value="/Make_word_Familiar")
public class Make_word_Familiar {
    
    // 注入 Dao 层
    @Autowired
    private PhraseDao phraseDao;

    @RequestMapping(value="/index", method= RequestMethod.POST   前端是 GET请求 还是 POST ??   )
    @ResponseBody           //此注解不能省略 否则ajax无法接受返回值
    public void update(String Familiar){            --> 必须和上面的 params.Familiar 保持一致, 不然没办法取值
        System.out.println(Familiar);
    }
}


=====================================================================================================   

    @RequestMapping(value="/Get_Random_phrase", method= RequestMethod.GET  前端是 GET请求 还是 POST ??  )
    @ResponseBody           //此注解不能省略 否则ajax无法接受返回值
    public List<Phrase> Get_Random_phrase(Model model) {
        List<Phrase> result =  phraseDao.get_Phrase_Random();
        model.addAttribute("result" , result);
        model.addAttribute("result" , very_familiar_words_json);   // 没错, 可以添加多个 model.addAttribute
        model.addAttribute("Fiction_content" , Fiction_content);
        return result;
    }


```
</details>
















<details>
<summary><b> 页面跳转 </b></summary>

```  


注意 :
@RequestMapping(value="/", method= RequestMethod.GET  )
和
@RequestMapping(value="", method= RequestMethod.GET  )
是不一样的

区别在哪里??
@RequestMapping(value="/", method= RequestMethod.GET  )
必须用 : http://localhost:8081/Word_Root/ 来访问

@RequestMapping(value="", method= RequestMethod.GET  )
这个就可以用 http://localhost:8081/Word_Root 来访问





@Controller
@RequestMapping(value="/Collected_word")
public class Collected_word {
    
    @RequestMapping(value="/index", method= RequestMethod.GET   前端是 GET请求 还是 POST ??   )
    // @ResponseBody   -> 网页跳转, 就不要加 @ResponseBody, 否则就会返回 /Collected_word/Collected_word.html 这个字符串
    public String index(){                              
        return "/Collected_word/Collected_word.html";
    }
}

单纯页面跳转, 就不要加: @ResponseBody  , 不然会直接返回数据, 而不是直接跳转页面


```
</details>























<details>
<summary><b> 前端传递数据, 后端接收 </b></summary>

```  

前端传递数据
前端
    <form action="/file/test3" method="GET">
        <input type="text" class="form-control" placeholder="Text input" name="username">
        <input class="btn btn-danger" type="submit" value="提交"/>
        <input type="reset" value="重置"/>
    </form>

后端
    @Controller
    @RequestMapping(value="/file")
    public class Article_list_Controller {

        @ResponseBody   -> 网页跳转, 就不要加 @ResponseBody, 否则就会返回 /Collected_word.html 这个字符串
        @RequestMapping(value="/test3",method=RequestMethod.GET)
        public String add(HttpServletRequest request, HttpServletResponse response){
            System.err.println(request.getParameter("username"));
            return null;
        }    



或者访问地址:
    http://localhost:8081/Get_word/bbb?qq=11111111111111111111111

后端用  request.getParameter("qq") 来接收:
    @ResponseBody
    @RequestMapping(value="/bbb",method= RequestMethod.GET   前端是 GET请求 还是 POST ??   )
    public String add(HttpServletRequest request, HttpServletResponse response){
        System.err.println(request.getParameter("qq"));
        return null;
    }


后端接收数据:
@Controller
@RequestMapping(value="/Collected_word")
public class Collected_word {

    @RequestMapping(value="/index", method= RequestMethod.GET  前端是 GET请求 还是 POST ??  )
    public String index(Model model){
        List<Tb_word> tb_words = otherDao.Get_Collected_word();
        model.addAttribute("result" , tb_words);
        model.addAttribute("result" , very_familiar_words_json);   // 没错, 可以添加多个 model.addAttribute
        model.addAttribute("Fiction_content" , Fiction_content);        
        return "/Collected_word/Collected_word.html";
    }
}


```
</details>




























<details>
<summary><b> 后端传值, 前端取值 </b></summary>

```  

注意:  前端 JavaScript 不要忘了 :
    <script th:inline="javascript">  
    html文件的头 <html xmlns:th="http://www.thymeleaf.org">


如果后端传递的是 json 数据, 那么前端需要 JSON.parse 来解析数据
比如:
    var result = JSON.parse([[${result}]]);
    console.log(result);


==========================================  前端取值1  ==========================================
后端传输:
@Controller
@RequestMapping(value="/Short_News")
public class Short_News {

    @Autowired
    private Short_News_Mapper short_news_mapper;

    @RequestMapping(value="index", method= RequestMethod.GET    )
    public String index(Model model){
        List<Tb_short_news> short_news_list = short_news_mapper.get_Short_News();
        model.addAttribute("short_news_list" , short_news_list);
        return "/Read/Short_News.html";
    }
}


前端接收后端传过来的数据:
前端取值 (在 thymeleaf 中使用 JavaScript 获取后台传到前台的值):
    <script th:inline="javascript">
        var results___ = [[${short_news_list}]];
        console.log(results___);
    </script>



html循环遍历的方式 iterStat 可以获取序号索引(注意: 不要用 new , 会冲突):
    <tr  th:each="item, iterStat : ${short_news_list}">
        <td th:text="${iterStat.index} ">序号</td>
        <td th:text="${item.title} "></td>
        <td th:text="${item.content} "></td>
    </tr>

注意:
thymeleaf 之 th:each迭代循环
th:each属性用于迭代循环，语法：th:each="obj,iterStat:${objList}"
迭代对象可以是java.util.List,java.util.Map,数组等;

iterStat称作状态变量，属性有：
    index:当前迭代对象的index（从0开始计算）
    count: 当前迭代对象的index(从1开始计算)
    size:被迭代对象的大小
    current:当前迭代变量
    even/odd:布尔值，当前循环是否是偶数/奇数（从0开始计算）
    first:布尔值，当前循环是否是第一个
    last:布尔值，当前循环是否是最后一个







==========================================  前端取值2  ==========================================
后端:
    @GetMapping("/message")
    public String getMessage(Model model){
        model.addAttribute("message","This is your message");
        model.addAttribute("result" , very_familiar_words_json);   // 没错, 可以添加多个 model.addAttribute
        model.addAttribute("Fiction_content" , Fiction_content);

        return "index";
    }

前端取值:
    <p th:text="#{message}">default message</p>





==========================================  前端取值3  ==========================================

jQuery方式遍历后端传过来的数据  ( thymeleaf可以用 ):

    后端 springboot 逻辑:
        List<Tb_word> tb_words = mapper.Get_Today_word("2020-02-09");
        model.addAttribute("result" , tb_words);
        model.addAttribute("result" , very_familiar_words_json);   // 没错, 可以添加多个 model.addAttribute
        model.addAttribute("Fiction_content" , Fiction_content);        
        return "index.html";
        
    然后前端 JavaScript 取传过来的值 :
        var results___ = [[${result}]];
        console.log(results___);

    然后前端html写好模板 ( interStat  系统自带 ):
        <div th:each="result, interStat : ${result}">
            <h1 th:text="${interStat.index}"></h1>
            <h1 th:text="${result.word}"></h1>
        </div>





==========================================  前端取值4  ==========================================
    循环遍历渲染:
    可以考虑用 Vue 


遍历键值对:
前提是 result_json 也必须是键值对 hashmap
<div id="Article_content">
    <div  v-for="key , value in result_json">
        <h1>{{key}}</h1>
        <h1>{{value}}</h1>
    </div>
</div>

new Vue({
    el: '#Article_content',
    data: {
        result_json: result_json
    }
});



也可以遍历 Set 类型的数据:
index 是索引:
    <div  v-for="(word, index) in word_Set">
        <span>{{index}}</span>
        &nbsp;    &nbsp;   &nbsp;
        <span>{{word}}</span>
    </div>


```
</details>






























# SpringBoot + thymeleaf + pagehelper 分页
<details>
<summary><b> 第一步 : pom.xml 添加依赖 </b></summary>

```  
        <!-- pagehelper -->
        <dependency>
            <groupId>com.github.pagehelper</groupId>
            <artifactId>pagehelper-spring-boot-starter</artifactId>
            <version>1.2.5</version>
        </dependency>

```
</details>






















<details>
<summary><b> thymeleaf 中 跳转链接 : </b></summary>

```  


参考资料:  https://www.jianshu.com/p/073f79c5e438

完整链接:  http://localhost:8081/Word/Remember?Date=2020-02-10

var test = window.location.href;
console.log(test);
>>> http://localhost:8081/Word/Remember?Date=2020-02-10

var test1 = window.location.pathname;
console.log(test1);
>>> /Word/Remember

var test2 = window.location.search;
console.log(test2);
>>> ?Date=2020-02-10


获取url中的参数值*
    console.log(GetQueryString("Date"));
    >>> 2020-02-10

    function GetQueryString(name) {
        var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');
        var r = window.location.search.substr(1).match(reg);
        if (r != null) {
            return unescape(r[2]);
        }
        return null;
    }










Springboot 中 thymeleaf 使用:

假设 url：http://localhost:8080/CarsiLogCenter_new/idpstat.jsp?action=idp.sptopn
    request.getRequestURL()              http://localhost:8080/CarsiLogCenter_new/idpstat.jsp
    request.getRequestURI()              /CarsiLogCenter_new/idpstat.jsp
    request.getContextPath()             /CarsiLogCenter_new
    request.getServletPath()             /idpstat.jsp
    request.getQueryString()             action=idp.sptopn




假设 url：
    http://localhost:8081/Article/Read_Article?name=YXB&password=12345

    <h1 th:text="${#httpServletRequest.getScheme()}"></h1>
    http

    <h1 th:text="${#httpServletRequest.getServerName()}"></h1>
    localhost

    <h1 th:text="${#httpServletRequest.getServerPort()}"></h1>
    8081

    <h1 th:text="${#request.getSession().getServletContext().getRealPath('/')}"></h1>
    C:\Users\SpringBoot\AppData\Local\Temp\tomcat-docbase.4234408327941048660.8081\

    <h1 th:text="${#request.getRequestURI()}"></h1>
    /Article/Read_Article

    <h1 th:text="${#request.getQueryString()}"></h1>
    name=YXB&password=12345



thymeleaf 中 跳转链接
    <a th:href="@{'/menu/getMenu?pageNum='+ ${pageInfo.firstPage}}" >首页</a>




```
</details>




























<details>
<summary><b> pagehelper 参数简介 </b></summary>

```  



参考资料:         https://www.jianshu.com/p/50fcd7f127f0

pageInfo.pageSize       每页条数
pageInfo.total          一共 x 条记录
pageInfo.pageNum        当前第几页
pageInfo.firstPage      首页(在pagehelper中有歧义, 这里指的是导航条中的第一页, 并非真正的第一页)
pageInfo.lastPage       尾页(在pagehelper中有歧义, 这里指的是导航条中的最后一页, 并非真正的尾页)
pageInfo.prePage        上一页
pageInfo.nextPage       下一页
         pages          总页数 (这个页数也很好算，每页5条，总共有11条，需要3页才可以显示完)
         list           结果集


SpringBoot 中 thymeleaf 使用案例:
<a     th:href="${#request.getRequestURI()} + '?page='  +  ${pageInfo.lastPage}"    >尾页</a>


<div>是否为第一页：<span th:text="${pageInfo.isFirstPage}"></span></div>
<div>是否为最后一页：<span th:text="${pageInfo.isLastPage}"></span></div>
<div>是否有前一页：<span th:text="${pageInfo.hasPreviousPage}"></span></div>
<div>是否有下一页：<span th:text="${pageInfo.hasNextPage}"></span></div>


<a th:href="${#request.getRequestURI()} + '?page='  +  ${pageInfo.pages} ">尾页</a>



```
</details>


























<details>
<summary><b> 后端程序 : </b></summary>

```  


pojo 实体类 :
    略...


Controller 类:
    @RequestMapping(value="/Read_Article", method= RequestMethod.GET    )
    public  String Read_Article(@RequestParam(defaultValue = "1") int page , @RequestParam(defaultValue = "3") int pageSize , @RequestParam(defaultValue = "肖申克的救赎.txt") String file_name , Model model) throws IOException, InterruptedException {

        //       http://localhost:8080/users?pageNo=1&pageSize=5&file_name=肖申克的救赎.txt
        //       http://localhost:8081/Article/Read_Article

        System.out.println(page);                // 1
        System.out.println(pageSize);              // 5
        System.out.println(file_name);             // Jack_Tom

        file_name = "src/main/resources/static/Article/" + file_name;

        PageHelper.startPage(page,pageSize);

        List<Tb_Movie_Script_POJO> tb_movie_script_pojos = articleMapper.Get_movie_Script();

        PageInfo<Tb_Movie_Script_POJO> pageInfo = new PageInfo<Tb_Movie_Script_POJO>(tb_movie_script_pojos);

        model.addAttribute("pageInfo" , pageInfo);
        model.addAttribute("result" , very_familiar_words_json);   // 没错, 可以添加多个 model.addAttribute
        model.addAttribute("Fiction_content" , Fiction_content);        

        return "/Article/TEST.html";
    }





Mapper 类(写SQL 语句):
@org.apache.ibatis.annotations.Mapper
public interface ArticleMapper {
    @Select("   SELECT * FROM `tb_Movie_Script` WHERE `movie_name` = '肖申克的救赎.txt'  ")
    List<Tb_Movie_Script_POJO> Get_movie_Script();
}


```
</details>




























<details>
<summary><b> 前端 接收后端数据 : </b></summary>

```  

别忘了   <html xmlns:th="http://www.thymeleaf.org">





<div style="font-size: 25px;">
    当前第<span th:text="${pageInfo.pageNum} "></span>页,
    每页条数：<span th:text="${pageInfo.pageSize}"></span>,
    一共 <span th:text="${pageInfo.total}"></span> 条记录,
    一共 <span th:text="${pageInfo.pages}"></span> 页
</div>





<nav aria-label="Page navigation">
    <ul class="pagination pagination-lg">

<!--       首页           -->
        <li th:if="${pageInfo.hasPreviousPage}">
            <a       th:href="${#request.getRequestURI()} + '?page=1'        "       >首页</a>
        </li>


<!--               上一页             -->
        <li th:if="${pageInfo.hasPreviousPage}">
            <a     th:href="${#request.getRequestURI()} + '?page='  +  ${pageInfo.prePage}"     aria-label="Previous">
                <span aria-hidden="true">上一页</span>
            </a>
        </li>


        <!--循环遍历连续显示的页面，若是当前页就高亮显示，并且没有链接-->
        <th:block th:each="nav : ${pageInfo.navigatepageNums}" >
            <li  th:class="${nav == pageInfo.pageNum} ? 'active':''    ">
                <a   th:href="${#request.getRequestURI()} + '?page='  +  ${nav}"  th:if="${nav != pageInfo.pageNum}"   th:text="${nav}"></a>
                <span style="font-weight: bold" th:if="${nav == pageInfo.pageNum}" th:text="${nav}"></span>
            </li>
        </th:block>



<!--          下一页                 -->
        <th:block th:if="${pageInfo.hasNextPage}">
        <li>
            <a         th:href="${#request.getRequestURI()} + '?page='  +  ${pageInfo.nextPage}"       aria-label="Next">
                <span aria-hidden="true">下一页</span>
            </a>
        </li>
        </th:block>


<!--        尾页                  -->
        <li th:if="${pageInfo.hasNextPage}">
            <a th:href="${#request.getRequestURI()} + '?page='  +  ${pageInfo.pages} ">尾页</a>
        </li>

    </ul>
</nav>



<th:block th:each="data : ${pageInfo.list}" >
    <h1 th:text="${data.english}"></h1>
    <h2 th:text="${data.chinese}"></h2>
    <h2 th:text="${data.line_num}"></h2>
    <br>
</th:block>


<script th:inline="javascript">
    // 从后台接收数据
    var pageInfo = [[${pageInfo}]];
    console.log(pageInfo);
</script>



```
</details>
































# Mybatis / SQL
<details>
<summary><b> Mybatis 简单入门 </b></summary>

```  




参考资料 :     https://blog.csdn.net/KingBoyWorld/article/details/78948304





@Insert(“sql”) 增
@Delete(“sql”) 删
@Update(“sql”) 改
@Select(“sql”) 查



@org.apache.ibatis.annotations.Mapper
public interface ArticleMapper {
    像这种, 返回的是一个集合(list 接收返回的数据)
    @Select("SELECT * FROM words_warehouse")
    List<Words_Warehouse> getAll();


    像这种, 返回的只是一个 Java 对象  (   '#{word}' 是错误的写法, 不要有单引号''   )
    @Select("SELECT * FROM words_warehouse WHERE word = #{word}")
    Words_Warehouse getOne(String word);

    改 返回一个 int 数据, 意思是, 修改成功了 X 条   (   '#{word}' 是错误的写法, 不要有单引号''   )
    @Update(" UPDATE `words_warehouse` SET `status`='very_familiar_with' WHERE word= #{english_word};")
    int really_remember(String english_word);

    增    (   '#{word}' 是错误的写法, 不要有单引号''   )
    @Insert("INSERT INTO words_warehouse(words_warehousename) VALUES(#{words_warehouseName})")
    void insert(Words_Warehouse words_warehouse);

    删   (   '#{word}' 是错误的写法, 不要有单引号''   )
    @Delete("DELETE FROM words_warehouse WHERE word =#{word}")
    void delete(Integer word);

}




------------------------------   动态SQL   -------------------------------

                                   @Select                                  
    <if test="条件判断">sql</if>
分页查询用户,如果sex有值，则查询相应sex的所有用户，sex没值则查询所有
    @Select("<script>SELECT * FROM `user` <if test='sex != null'>where sex = #{sex}</if><script>")
    List<User> listUser(Sex sex);//sex是一个枚举类型，值为BOY,GIRL



    @Select("<script>"
            + "SELECT * FROM `user` WHERE id in "
            + "<foreach item='item' collection='list' open='(' close=')' separator=','>"
            + "#{item}"
            + "</foreach>"
            + "</script>")
    List<User> listUserByIds(List<Long> ids);
    例如传入的ids为[2,4,6]生成的sql如下：
        SELECT * FROM `user` WHERE id in ( 2 , 4, 6 ) 



    /*
     * 根据条件查询用户
     * 注意其中nickName模糊查询的处理方法
     * 注意其中关于生日的区间判断, &lt; &gt;
     * @param userQueryDTO
     * @return
     */
    @Select("<script>"
            + "SELECT * FROM `user`"
            + "<where>"
            + "<bind name='nickName' value=\"'%' + nickName + '%'\" />"
            + "<if test='nickName != null'>AND nick_name like #{nickName}</if>"
            + "<if test='phoneNumber !=null'>AND phone_number = #{phoneNumber}</if>"
            + "<if test='sex !=null'>AND sex = #{sex}</if>"
            + "<if test='age !=null'>AND age = #{age}</if>"
            + "<if test='fromBirthday !=null'>AND birthday &gt; #{fromBirthday}</if>"
            + "<if test='toBirthday !=null'>AND birthday &lt; #{toBirthday}</if>"
            + "<if test='status !=null'>AND status = #{status}</if>"
            + "</where>"
            + "</script>")
    List<User> queryByCondition(UserQueryDTO userQueryDTO);




模糊查询:
5.<bind name='新属性' value="'%' + 原属性 + '%'" />

在模糊查询时，
我们通常使用where name like %金%这样的方式来进行查询(当然这样效率很低，不推荐)
但是在mybatis里面我们直接写where name like %#{name}%是不行的，
会生成where name like %'金'%这样的sql, 很明显是不行的。有两种方式可以处理

1)、传入的属性上加上%号，例如传入的name就为%金%,这样可以解决，但是不方便
2)、使用bind标签，我们可以在sql中加入一行赋值操作<bind name='newName' value="'%' + name + '%'" />

    /**
     * 如果age有值，通过age查询
     * 如果age没有值，则通过sex查询
     * 如果age和sex都没值，则查询所有status为UNLOCK的用户
     * @param age
     * @param sex
     * @return
     */
    @Select("<script>"
            + "SELECT * FROM `user`"
            + "<where>"
            + "<choose>"
            + "<when test='age != null'>AND age = #{age}</when>"
            + "<when test='sex != null'>AND sex = #{sex}</when>"
            + "<otherwise>AND status = 'UNLOCK'</otherwise>"
            + "</choose>"
            + "</where>"
            + "</script>")
    List<User> getByOrderCondition(@Param("age") Integer age, @Param("sex") Sex sex);









使用set标签进行动态set，要注意条件判断：没被删除的用户才可以更新数据
    @Update("<script>"
            + "UPDATE `user` "
            + "<set>"
            + "<if test='nickName != null'>nick_name = #{nickName}, </if>"
            + "<if test='age != null'>age = #{age}, </if>"
            + "<if test='phoneNumber != null'>phone_number = #{phoneNumber}, </if>"
            + "<if test='birthday != null'>birthday = #{birthday}, </if>"
            + "<if test='status != null'>status = #{status}, </if>"
            + "<if test='sex != null'>sex = #{sex}, </if>"
            + "</set>"
            + "WHERE id = #{id} AND status != 'DELETE';"
            + "</script>")
    void updateUser(User user);
    

```
</details>


























# 部署服务器
<details>
<summary><b> 把 SpringBoot 打包, 并且部署到服务器 </b></summary>

```  

在项目根目录打开 cmd (powershell也行)
运行编译命令:  mvn install 
之后跳转到当前项目的 target 文件夹下（cd target）
发现多出两个文件 
    Study_English-0.0.1-SNAPSHOT.jar
    Study_English-0.0.1-SNAPSHOT.jar.original
接下来在命令行继续输入命令 : java -jar 项目的jar名
    java -jar Study_English-0.0.1-SNAPSHOT.jar


命令行输出:
ort(s): 8081 (http) with context path ''
2020-03-11 14:17:31.650  INFO 12952 --- [           main] com.hehe.RootApplication                 : Started RootApplication in 3.339 seconds (JVM running for 3.895)
访问方式:
http://localhost:8081
记得打开 phpstudy 内置的MySQL 服务器, 不然web应用没办法正常访问...


说明编译部署成功~

浏览器访问 :  http://localhost:8081/


想终止服务怎么办?
    Ctrl + C 即可


```
</details>





